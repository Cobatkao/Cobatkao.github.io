<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å¤šäººåšå®¢é¡¹ç›®Review | çŒªè„šé¢çº¿çš„çŸ¥è¯†åº“</title>
    <meta name="description" content="For what it&#39;s worth, it&#39;s never too late.ï¼ˆUpdating... XDï¼‰">
    <link rel="icon" href="/isaacgaoblog/logo.ico">
    
    <link rel="preload" href="/isaacgaoblog/assets/css/0.styles.60655061.css" as="style"><link rel="preload" href="/isaacgaoblog/assets/js/app.01da7489.js" as="script"><link rel="preload" href="/isaacgaoblog/assets/js/23.4ecf9c22.js" as="script"><link rel="prefetch" href="/isaacgaoblog/assets/js/10.bb6e04e4.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/11.391fd545.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/12.602facc5.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/13.2d9982a6.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/14.83aaa352.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/15.90b7ef7b.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/16.fb97507d.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/17.d2fb61a5.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/18.5f85ae3a.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/19.b706601e.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/2.3704caf5.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/20.66d4ff5f.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/21.341d678b.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/22.3af63f24.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/24.15a6c94a.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/25.bc5a5667.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/26.823bab78.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/27.0327437d.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/28.db82409c.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/29.e695a449.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/3.98b19d1d.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/4.4d6e9538.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/5.44d0334a.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/6.b35e585c.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/7.723d1e3a.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/8.e2bfc8ff.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/9.508f61f1.js">
    <link rel="stylesheet" href="/isaacgaoblog/assets/css/0.styles.60655061.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/isaacgaoblog/" class="home-link router-link-active"><!----> <span class="site-name">çŒªè„šé¢çº¿çš„çŸ¥è¯†åº“</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/isaacgaoblog/" class="nav-link">ä¸»é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">çŸ¥è¯†åº“</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/isaacgaoblog/article/frontend/" class="nav-link">å‰ç«¯</a></li><li class="dropdown-item"><!----> <a href="/isaacgaoblog/article/backend/" class="nav-link">åç«¯</a></li></ul></div></div><div class="nav-item"><a href="/isaacgaoblog/posts/" class="nav-link router-link-active">åšæ–‡</a></div><div class="nav-item"><a href="https://www.github.com/Cobatkao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/isaacgaoblog/" class="nav-link">ä¸»é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">çŸ¥è¯†åº“</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/isaacgaoblog/article/frontend/" class="nav-link">å‰ç«¯</a></li><li class="dropdown-item"><!----> <a href="/isaacgaoblog/article/backend/" class="nav-link">åç«¯</a></li></ul></div></div><div class="nav-item"><a href="/isaacgaoblog/posts/" class="nav-link router-link-active">åšæ–‡</a></div><div class="nav-item"><a href="https://www.github.com/Cobatkao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>åšæ–‡</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/isaacgaoblog/posts/" class="sidebar-link">ç¢ç¢å¿µ</a></li><li><a href="/isaacgaoblog/posts/å¸ƒå±€å…¨è§£.html" class="sidebar-link">å¸ƒå±€å…¨è§£</a></li><li><a href="/isaacgaoblog/posts/é‡ç»˜ä¸é‡æ’.html" class="sidebar-link">é‡ç»˜ä¸é‡æ’</a></li><li><a href="/isaacgaoblog/posts/å°ç™½ä¹Ÿå¯ä»¥ææ‡‚çš„é—­åŒ….html" class="sidebar-link">å°ç™½ä¹Ÿå¯ä»¥ææ‡‚çš„é—­åŒ…</a></li><li><a href="/isaacgaoblog/posts/å°ç™½ä¸Šæ‰‹Promise.html" class="sidebar-link">å°ç™½ä¸Šæ‰‹Promise</a></li><li><a href="/isaacgaoblog/posts/å¤šäººåšå®¢é¡¹ç›®review.html" class="active sidebar-link">å¤šäººåšå®¢é¡¹ç›®Review</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/isaacgaoblog/posts/å¤šäººåšå®¢é¡¹ç›®review.html#é¡¹ç›®åˆå§‹åŒ–" class="sidebar-link">é¡¹ç›®åˆå§‹åŒ–</a></li><li class="sidebar-sub-header"><a href="/isaacgaoblog/posts/å¤šäººåšå®¢é¡¹ç›®review.html#å¼•å…¥elementui" class="sidebar-link">å¼•å…¥ElementUI</a></li><li class="sidebar-sub-header"><a href="/isaacgaoblog/posts/å¤šäººåšå®¢é¡¹ç›®review.html#ğŸ“¦-åº•å±‚æ¥å£å°è£…" class="sidebar-link">ğŸ“¦ åº•å±‚æ¥å£å°è£…</a></li><li class="sidebar-sub-header"><a href="/isaacgaoblog/posts/å¤šäººåšå®¢é¡¹ç›®review.html#vuex" class="sidebar-link">VUEX</a></li><li class="sidebar-sub-header"><a href="/isaacgaoblog/posts/å¤šäººåšå®¢é¡¹ç›®review.html#å®Œå–„è·¯ç”±ï¼šå…ƒä¿¡æ¯ä¸è·¯ç”±å®ˆå«" class="sidebar-link">å®Œå–„è·¯ç”±ï¼šå…ƒä¿¡æ¯ä¸è·¯ç”±å®ˆå«</a></li><li class="sidebar-sub-header"><a href="/isaacgaoblog/posts/å¤šäººåšå®¢é¡¹ç›®review.html#æŠ€å·§-å…¶å®ƒ" class="sidebar-link">æŠ€å·§&amp;å…¶å®ƒ</a></li></ul></li><li><a href="/isaacgaoblog/posts/å‰ç«¯å¿…é¡»çŸ¥é“çš„HTTPç¼“å­˜.html" class="sidebar-link">å‰ç«¯å¿…é¡»çŸ¥é“çš„HTTPç¼“å­˜</a></li><li><a href="/isaacgaoblog/posts/ä»å°è£…ä¸¤ä¸ªå‡½æ•°åˆ°å…¥é—¨jQuery.html" class="sidebar-link">ä»å°è£…ä¸¤ä¸ªå‡½æ•°åˆ°å…¥é—¨jQuery</a></li><li><a href="/isaacgaoblog/posts/webpack4åˆæ¬¡ä¸Šæ‰‹.html" class="sidebar-link">åˆæ¬¡ä¸Šæ‰‹webpack4</a></li><li><a href="/isaacgaoblog/posts/Vue.2.xå…¨å®¶æ¡¶å­¦ä¹ æ‰‹è®°.html" class="sidebar-link">ä½¿ç”¨è¯­é›€æ•´ç†Vueç¬”è®°</a></li><li><a href="/isaacgaoblog/posts/HTTPSé€šä¿¡æœºåˆ¶.html" class="sidebar-link">HTTPSé€šä¿¡æœºåˆ¶</a></li><li><a href="/isaacgaoblog/posts/Event_Loopå’Œä»»åŠ¡é˜Ÿåˆ—.html" class="sidebar-link">å‰ç«¯å¿…é¡»çŸ¥é“çš„Event Loop</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><blockquote><p>æœ¬é¡¹ç›®åšä¸€æ¬¾å¤šäººå…±äº«åšå®¢ï¼ŒåŒ…å«é¦–é¡µã€ç”¨æˆ·æ–‡ç« åˆ—è¡¨ã€ç™»å½•ã€æ³¨å†Œã€ä¸ªäººç®¡ç†ã€ç¼–è¾‘ã€å‘å¸ƒç­‰åŠŸèƒ½ã€‚ä½¿ç”¨ Vue.js æŠ€æœ¯æ ˆï¼švue-cli/vue2.x/ElementUI/axios/vue-router/vuex/es6/npm</p></blockquote> <p>æµ‹è¯•è´¦å·ï¼šhuanghuang</p> <p>å¯†ç ï¼š12345678</p> <p>æºç åœ°å€ï¼šhttps://github.com/Cobatkao/vue-blog-client</p> <p>æ‰“åŒ…åœ°å€ï¼šhttps://github.com/Cobatkao/vue-blog-preview</p> <p>çº¿ä¸Šé¢„è§ˆåœ°å€ï¼šhttp://isaacgao.cn/vue-blog-preview/#/</p> <p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘å¯¹VueåŠå…¶ç”Ÿæ€æœ‰äº†ä¸€ä¸ªç›¸å¯¹å…¨é¢çš„äº†è§£ä¸å®è·µã€‚</p> <p>ä¸‹é¢ï¼Œæˆ‘æ¥åˆ†å—é˜è¿°ä¸‹é¡¹ç›®æ€è·¯ä¸é€»è¾‘ã€‚</p> <h2 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" aria-hidden="true" class="header-anchor">#</a> é¡¹ç›®åˆå§‹åŒ–</h2> <p>ç¬¬ä¸€æ­¥ï¼Œåˆ©ç”¨vue-clié…åˆwebpackç”Ÿæˆé¡¹ç›®æ¨¡æ¿ï¼Œå¹¶é…ç½®å•é¡µåº”ç”¨è·¯ç”±</p> <h3 id="vue-cli"><a href="#vue-cli" aria-hidden="true" class="header-anchor">#</a> vue-cli</h3> <p>é€šè¿‡vue-cliåˆ›å»ºé¡¹ç›®æ¨¡æ¿ï¼Œè¿™æ˜¯æˆ‘å¯¹vue-cliçš„ç¬”è®°ï¼Œ<a href="http://note.youdao.com/noteshare?id=4fe677ce7a956ceaa7eb981097011048" target="_blank" rel="noopener noreferrer">vue-cli ç‚¹å‡»æŸ¥çœ‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="vue-router"><a href="#vue-router" aria-hidden="true" class="header-anchor">#</a> vue-router</h3> <p>è¿™ä¸€æ­¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†å¯¹åº”åˆ†é¡µçš„ç»„ä»¶æ˜ å°„åˆ°è·¯ç”±ï¼Œç„¶åå‘Šè¯‰è·¯ç”±åœ¨å“ªé‡Œæ¸²æŸ“ç»„ä»¶ã€‚</p> <p><strong>åšæ³•</strong>ï¼šåœ¨router/index.jsä¸­å¼•å…¥è·¯ç”±æ¨¡å—ï¼Œæ³¨å…¥è·¯ç”±ä¾›å…¨å±€ä½¿ç”¨ï¼ˆ<code>Vue.use(Router)</code>ï¼‰ï¼Œå®ä¾‹åŒ–è·¯ç”±ç»„ä»¶ï¼ˆ<code>var router = new VueRouter({...})</code>ï¼‰å¹¶é…ç½®è·¯ç”±<code>var routes = [{...}, {...}]</code>ï¼Œå†æŠŠå®ä¾‹åŒ–çš„è·¯ç”±åŠ å…¥Vueçš„å¯¹è±¡å®ä¾‹ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬åœ¨App.vueï¼ˆé¡µé¢ä¸»æ¨¡æ¿ï¼‰ä¸­æ·»åŠ è·¯ç”±å‡ºå£ï¼ˆ<code>router-view</code>ï¼‰</p> <p>æ›´å¤šå’Œè·¯ç”±é…ç½®æœ‰å…³çš„ç»†èŠ‚å†…å®¹ï¼Œè¯·è§æˆ‘å¯¹vue-routerçš„ç¬”è®°ï¼Œ<a href="http://note.youdao.com/noteshare?id=2d8925a19d4ae7f839cc8e647384baaf" target="_blank" rel="noopener noreferrer">Vue Router ç‚¹å‡»æŸ¥çœ‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="å¼•å…¥elementui"><a href="#å¼•å…¥elementui" aria-hidden="true" class="header-anchor">#</a> å¼•å…¥ElementUI</h2> <p>å…·ä½“ä½¿ç”¨è¯·å‚é˜…<a href="http://element-cn.eleme.io/#/zh-CN" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <p>â¤ï¸ æ—¢å¯ä»¥å…¨å±€å¼•å…¥ä¹Ÿå¯ä»¥æŒ‰éœ€å¼•å…¥</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// main.jsä¸­å…¨å±€å¼•å…¥
import ElementUI from 'element-ui';
import 'element-ui/lib/theme-chalk/index.css';

Vue.use(ElementUI)


// æŒ‰éœ€å¼•å…¥ï¼Œåªå¼•å…¥Messageæ¨¡å—
import { Message } from 'element-ui'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ„‰å¿«çš„ä½¿ç”¨ElementUIå§ï½</p> <h2 id="ğŸ“¦-åº•å±‚æ¥å£å°è£…"><a href="#ğŸ“¦-åº•å±‚æ¥å£å°è£…" aria-hidden="true" class="header-anchor">#</a> ğŸ“¦ åº•å±‚æ¥å£å°è£…</h2> <p>å†™äº†/helpers/request.jsæ–‡ä»¶é’ˆå¯¹axiosåº•å±‚çš„GETã€POSTæ–¹æ³•è¿›è¡Œå°è£…ã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿ</p> <ul><li>å®ç°åŸºäºaxiosè¯·æ±‚çš„åº•å±‚çš„å…±æœ‰å‡½æ•°ï¼Œæ–¹ä¾¿å…·ä½“ä¸šåŠ¡ä»£ç çš„å®ç°ï¼Œä¹Ÿè®©ä»£ç æ›´ç®€æ´ï¼Œæ˜“ç»´æŠ¤</li> <li>åœ¨å°è£…çš„requestæ–¹æ³•ä¸­è¿”å›äº†Promiseï¼Œæ–¹ä¾¿è°ƒç”¨è€…thenï¼Œcatchï¼Œå¹¶ä¸”èƒ½å“åº”é”™è¯¯</li></ul> <p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ å°è£…äº†ä¸€ä¸ªæ•°æ®è¯·æ±‚æ–¹æ³•ï¼Œå…¶å®ƒæ–‡ä»¶è¦è·å–æ•°æ®ï¼Œåªè¦è°ƒç”¨ä½ æä¾›çš„æ–¹æ³•å³å¯ï¼Œè¿™ä¸ªæ–¹æ³•å¯èƒ½å¼•å…¥elementUIæ›´äººæ€§åŒ–æŠ¥é”™ä¿¡æ¯ï¼Œæ›´å®ç”¨çš„å‚æ•°ç­‰ç­‰ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token comment">// æŒ‰éœ€å¼•å…¥element-uiä¸­çš„messageç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-ui'</span>


axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/x-www-form-urlencoded'</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'http://blog-server.hunger-valley.com'</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">'GET'</span><span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
      url<span class="token punctuation">,</span>
      method<span class="token punctuation">:</span> type
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'get'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      option<span class="token punctuation">.</span>params <span class="token operator">=</span> data
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      option<span class="token punctuation">.</span>data <span class="token operator">=</span> data
    <span class="token punctuation">}</span>
    <span class="token function">axios</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// statusæ˜¯æˆåŠŸçš„çº¦å®š</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'ok'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// status = fail</span>
        Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'ç½‘ç»œå¼‚å¸¸'</span><span class="token punctuation">)</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>msg<span class="token punctuation">:</span> <span class="token string">'ç½‘ç»œå¼‚å¸¸'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>é¡¹ç›®ä¸­æˆ‘ä»¬å°è£…äº†axiosçš„getï¼Œpostæ–¹æ³•ï¼Œæš´éœ²å‡ºrequestæ–¹æ³•ï¼Œä¾›/api/blog.jså’Œ/api/auth.jsè¿›ä¸€æ­¥å°è£…å„ä¸ªåœºæ™¯ä¸šåŠ¡æ–¹æ³•ï¼Œå¦‚æ³¨å†Œã€ç™»é™†ã€è·å–ä¿¡æ¯ã€æ³¨é”€åŠå¯¹åšå®¢çš„å¢åˆ æ”¹æŸ¥ç­‰ç­‰ã€‚è¿™éƒ¨åˆ†ä»£ç è§<code>/api</code>ç›®å½•ã€‚</p> <h2 id="vuex"><a href="#vuex" aria-hidden="true" class="header-anchor">#</a> VUEX</h2> <p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿ç”¨vuexç®¡ç†å„ä¸ªåœºæ™¯ä¸‹å…¬ç”¨çš„çŠ¶æ€ã€‚</p> <h3 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" aria-hidden="true" class="header-anchor">#</a> ç¬¬ä¸€æ­¥</h3> <p>å¯¹çŠ¶æ€è¿›è¡Œäº†åˆ†æ¨¡å—åˆ†ç±»ç®¡ç†ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>â””â”€â”€ store
    â”œâ”€â”€ entry.js //å¼•å…¥vuexï¼Œå­æ¨¡å—ï¼Œå¹¶å®ä¾‹åŒ–`Vuex.Store`
    â””â”€â”€ modules
        â”œâ”€â”€ auth.js //è´Ÿè´£ç”¨æˆ·æ³¨å†Œã€ç™»å½•çŠ¶æ€
        â””â”€â”€ blog.js //è´Ÿè´£ç”¨æˆ·è·å–ã€å‘å¸ƒã€ä¿®æ”¹åšå®¢ç­‰
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>é¦–å…ˆï¼Œåœ¨entry.jsä¸­å¼•å…¥äº†vuexï¼Œå¹¶å°†å®ä¾‹åŒ–çš„Vuex.Store()æ„é€ å™¨exportå‡ºå»ï¼Œéšååœ¨main.jsä¸‹å¼•å…¥storeï¼Œ<code>import store from './store/entry'</code> ,å¹¶é…ç½®åˆ°vueå®ä¾‹ä¸­ï¼Œè¿™æ ·é¡µé¢å°±å¯ä»¥ä½¿ç”¨vuexã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//entry.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> auth <span class="token keyword">from</span> <span class="token string">'./modules/auth'</span>
<span class="token keyword">import</span> blog <span class="token keyword">from</span> <span class="token string">'./modules/blog'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token comment">//åˆ›å»ºå…¨å±€vuexå¯¹è±¡ï¼Œæš´éœ²ä¾›å…¨å±€vueä½¿ç”¨</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  modules<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    auth<span class="token punctuation">,</span>
    blog
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//main.js</span>
<span class="token operator">...</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/entry'</span>
<span class="token operator">...</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  store<span class="token punctuation">,</span>
  router<span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;App/&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" aria-hidden="true" class="header-anchor">#</a> ç¬¬äºŒæ­¥</h3> <p>å°†è´Ÿè´£ç™»é™†ï¼Œæ³¨å†ŒåŠæ£€æµ‹çŠ¶æ€çš„stateå†™åœ¨/store/modules/auth.jsä¸‹ï¼Œ<a href="https://github.com/Cobatkao/vue-blog-client/blob/master/src/store/modules/auth.js" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹â€”auth.jsé¡¹ç›®ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>mutationsç”¨äºä¿®æ”¹stateä¸­çš„userï¼ŒisLogin</li> <li>actionsè°ƒç”¨äº†/api/auth.jsä¸­ä¸ç™»é™†ç›¸å…³çš„æ–¹æ³•æ¥ä¾›ä¸šåŠ¡ç»„ä»¶ä½¿ç”¨</li> <li>â¤ï¸è¿™é‡Œä½¿ç”¨äº†async&amp;awaitæ¥ç®€åŒ–promiseé“¾æ“ä½œ</li> <li>å› ä¸ºasyncæ˜¯åŸºäºpromiseçš„ï¼Œæ‰€ä»¥ä¸šåŠ¡ç»„ä»¶ä¸­è°ƒç”¨å¦‚<code>login</code>æ–¹æ³•ï¼Œéƒ½å¯ä»¥ç»§ç»­thenï¼Œcatch</li></ul> <h3 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" aria-hidden="true" class="header-anchor">#</a> ç¬¬ä¸‰æ­¥</h3> <p>åœ¨ä¸šåŠ¡ç»„ä»¶ä¸­æ˜ å°„actionsï¼Œå¹¶commitæ›´æ–°çŠ¶æ€ã€‚</p> <p>è¿™é‡Œæˆ‘ä»¬æŠŠ<code>/store/modules/auth.js</code>ä¸­çš„<code>login</code>æ˜ å°„åˆ°<code>pages/Login/template.js</code>çš„methodså†…ï¼Œä¾›é¡µé¢æ¨¡æ¿è§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p> <p>æ•´ä¸ªé€»è¾‘æ˜¯ï¼šé¡µé¢ä¸Šç‚¹å‡»buttonï¼Œè°ƒç”¨<code>/store/modules/auth.js</code>ä¸­çš„<code>login</code>ï¼Œå®Œæˆç™»é™†äº¤äº’åï¼Œæ›´æ–°stateä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”å°†æ•°æ®å“åº”åˆ°éœ€è¦çš„ç»„ä»¶æ¥æ›´æ–°çŠ¶æ€ï¼šå¦‚<code>headers.vue</code>éœ€è¦è¯»å–<code>isLogin</code>æ¥åˆ‡æ¢ç™»é™†æ€æ ·å¼ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      username<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      password<span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token function">onLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>username<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// è·³è‡³é¦–é¡µ</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>redirect <span class="token operator">||</span> <span class="token string">'/'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ol><li>æ‰€è°“çš„æ˜ å°„å°±æ˜¯ç”¨åˆ°äº†vuexçš„è¾…åŠ©å‡½æ•°ï¼š<code>mapActions</code>ï¼Œå°†æ–¹æ³•å±•å¼€åˆ°loginç»„ä»¶ä¸­</li> <li>ç„¶å<code>this.login(...)</code>å°±å¯ä»¥è°ƒç”¨<code>auth.js</code>ä¸­çš„æ–¹æ³•äº†</li></ol> <h3 id="ç¬¬å››æ­¥"><a href="#ç¬¬å››æ­¥" aria-hidden="true" class="header-anchor">#</a> ç¬¬å››æ­¥</h3> <p>åœ¨ç»„ä»¶æ¨¡æ¿ä¸­è®¾ç½®ç‚¹å‡»/inputäº‹ä»¶ï¼Œè§¦å‘å¹¶æ‰§è¡Œ<code>onLogin</code> â€”â€”&gt; è°ƒç”¨<code>this.login</code>ï¼Œæ‰§è¡Œ<code>auth.login({ username, password })</code>ï¼Œå‘èµ·axiosè¯·æ±‚å¼‚æ­¥æ•°æ® â€”â€”&gt; å¼‚æ­¥æ•°æ®åˆ°æ¥åcommitçŠ¶æ€ï¼Œæ›´æ–°stateæ•°æ® â€”â€”&gt; æœ€åé‡å®šå‘åˆ°é¦–é¡µï¼Œ<code>this.$router.push({path: this.$route.query.redirect || '/'})</code>ã€‚</p> <h3 id="ç¬¬äº”æ­¥"><a href="#ç¬¬äº”æ­¥" aria-hidden="true" class="header-anchor">#</a> ç¬¬äº”æ­¥</h3> <p>headerç»„ä»¶çš„ç™»é™†æ€åˆ‡æ¢ã€‚</p> <p>åœ¨Header.vueä¸­ï¼Œç™»å½•å’Œæœªç™»å½•ï¼Œä»–çš„æ ·å¼åœ¨ä¸¤ç§çŠ¶æ€ä¸‹æ˜¯ä¸ä¸€æ ·çš„ã€‚</p> <p><img src="https://ws4.sinaimg.cn/large/006tNbRwly1fxlgwnli2oj30x302t0t2.jpg" alt="pic"></p> <p><img src="https://ws2.sinaimg.cn/large/006tNbRwly1fxlgwkgtl7j30x20akgm9.jpg" alt="pic"></p> <p>å¦‚ä½•å®ç°ä¸¤ç§çŠ¶æ€çš„åˆ‡æ¢å‘¢ï¼Ÿå½“ç„¶æ˜¯é vuexäº†ã€‚</p> <p>åœ¨<code>/components/header.vue</code>ä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¼•å…¥äº†vuexè¾…åŠ©å‡½æ•°æ˜ å°„</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
        mapGetters<span class="token punctuation">,</span>
        mapActions
    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸€ç§æ˜¯<code>...mapGetters(['isLogin', 'user'])</code>ï¼Œè·å–çŠ¶æ€ï¼›å¦ä¸€ç§æ˜¯<code>...mapActions(['checkLogin', 'logout'])</code>ï¼Œæ–¹ä¾¿åœ¨é¡µé¢è¿˜æœªæŒ‚è½½ï¼Œæ¸²æŸ“æ—¶æ£€æŸ¥stateä¸­ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œç”¨æˆ·å·²ç™»å½•ï¼Œåˆ™è¿”å› isLogin = true ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼›ç”¨æˆ·æœªç™»å½•ï¼Œåˆ™è¿”å› isLogin = falseï¼Œå±•ç¤ºç™»é™†æ³¨å†Œæ¡†ã€‚</p> <p>å…·ä½“ä»£ç ï¼Œ<a href="https://github.com/Cobatkao/vue-blog-client/blob/master/src/components/header.vue" target="_blank" rel="noopener noreferrer">æŸ¥çœ‹/components/header.vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä»¥ä¸Šæ˜¯ä½¿ç”¨vuexåœ¨é¡¹ç›®ä¸­ç®¡ç†ç™»é™†ç›¸å…³çŠ¶æ€çš„ç¬”è®°ã€‚</p> <h2 id="å®Œå–„è·¯ç”±ï¼šå…ƒä¿¡æ¯ä¸è·¯ç”±å®ˆå«"><a href="#å®Œå–„è·¯ç”±ï¼šå…ƒä¿¡æ¯ä¸è·¯ç”±å®ˆå«" aria-hidden="true" class="header-anchor">#</a> å®Œå–„è·¯ç”±ï¼šå…ƒä¿¡æ¯ä¸è·¯ç”±å®ˆå«</h2> <p>é¡¹ç›®ä¸­ï¼ŒæŸäº›é¡µé¢åœ¨è·³è½¬æ—¶éœ€è¦æˆ–è€…åœ¨ä¸Šä¸ªé¡µé¢ä¸­ç”¨æˆ·æ˜¯å¦ç™»é™†ï¼Œæ‰èƒ½æ“ä½œï¼Œå¦åˆ™å°†è‡ªå®šè½¬åˆ°ç™»é™†æ³¨å†Œé¡µé¢ï¼Œå¦‚æ·»åŠ ï¼Œä¿®æ”¹ï¼Œæäº¤æ–‡ç« ç­‰ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¦ç”¨è·¯ç”±å…ƒä¿¡æ¯ï¼Œæ·»åŠ ä¸€å°æ®µå†…å®¹æ¥åœ¨å¯¼èˆªæ—¶å¯¹è·¯å¾„åšçŠ¶æ€æ£€æŸ¥ï¼Œä»æ€»è·¯å£æ¥è§£å†³ã€‚</p> <p>åœ¨è·¯ç”±é…ç½®æ–‡ä»¶<code>router/index.js</code>ä¸­ï¼Œæˆ‘ä»¬ç»™éœ€è¦çš„è·¯ç”±é…ç½®ä¸€ä¸ªmetaå±æ€§ï¼Œ<code>meta: { requiresAuth: true }</code>ï¼Œè¿™æ®µè·¯ç”±åŒ¹é…åˆ°çš„è·¯ç”±è®°å½•ä¼šè¢«æš´éœ²ä¸º<a href="https://router.vuejs.org/zh/api/#%E8%B7%AF%E7%94%B1%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener noreferrer"><code>$route</code>å¯¹è±¡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (è¿˜æœ‰åœ¨å¯¼èˆªå®ˆå«ä¸­çš„è·¯ç”±å¯¹è±¡)çš„<code>$route.matched</code>æ•°ç»„ï¼šä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å½“å‰è·¯ç”±çš„æ‰€æœ‰åµŒå¥—è·¯å¾„ç‰‡æ®µçš„è·¯ç”±è®°å½• ã€‚</p> <p>é€šè¿‡éå†<code>$route.matched</code>æ¥æ£€æŸ¥è·¯ç”±è®°å½•ä¸­çš„metaå­—æ®µï¼Œå¯¹è®¿é—®çš„è·¯å¾„åšä¸€ä¸ªçŠ¶æ€æ£€æŸ¥ï¼Œä»è€Œç¡®å®šæ˜¯å¦å…è®¸è®¿é—®ã€‚</p> <h2 id="æŠ€å·§-å…¶å®ƒ"><a href="#æŠ€å·§-å…¶å®ƒ" aria-hidden="true" class="header-anchor">#</a> æŠ€å·§&amp;å…¶å®ƒ</h2> <h3 id="async-await"><a href="#async-await" aria-hidden="true" class="header-anchor">#</a> async&amp;await</h3> <p>asyncçš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³å¤šä¸ªPromiseçš„åŒæ­¥æ“ä½œï¼Œå°±åƒpromiseè¦è§£å†³å›è°ƒå‡½æ•°çš„å±‚å±‚åµŒå¥—ä¸€æ ·ã€‚</p> <p>æ‰€ä»¥async/awaitå°±æ˜¯è¦å®Œå–„Promiseè¿˜ä¸å¤Ÿå®Œç¾çš„åœ°æ–¹ï¼Œæ˜¯åœ¨Promiseçš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›çš„ï¼Œå› æ­¤ä¹Ÿå¾ˆå¥½ç†è§£ä¸ºä»€ä¹ˆawaitåªèƒ½â€œç­‰å¾…â€Promiseå¯¹è±¡ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// promiseå†™æ³•</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> password<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> auth<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setUser'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> user<span class="token punctuation">:</span> res<span class="token punctuation">.</span>data <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setLogin'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> isLogin<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token comment">// async&amp;awaitæ”¹å†™</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//ç”¨æˆ·ç™»å½•</span>
  <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> password<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> auth<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setUser'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> user<span class="token punctuation">:</span> res<span class="token punctuation">.</span>data <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setLogin'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> isLogin<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span>data
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>å…·ä½“å…³äºasync&amp;awaitè¯·å‚è§æˆ‘å†™çš„è¿™ç¯‡ç¬”è®°ï¼š<a href="http://note.youdao.com/noteshare?id=3c49e33bab38f6acad9c5408766620d7" target="_blank" rel="noopener noreferrer">async&amp;await ç¬”è®°<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="è·¯ç”±æ‡’åŠ è½½"><a href="#è·¯ç”±æ‡’åŠ è½½" aria-hidden="true" class="header-anchor">#</a> è·¯ç”±æ‡’åŠ è½½</h3> <p><img src="https://ws1.sinaimg.cn/large/006tNbRwly1fxkhbh3yr7j30870cywfh.jpg" alt="pic"></p> <p>ä½ å¯ä»¥åœ¨ä¸Šå›¾ä¸­å‘ç°é¡¹ç›®æ‰“åŒ…åä¼šå˜æˆvendor.js,0.xxxx.js,1.xxxx.js,2.xxxx.js ï¼Œæ¯ä¸€ä¸ªè·¯ç”±éƒ½ä¼šå˜æˆä¸€ä¸ªæ–‡ä»¶ï¼Œé¡¹ç›®åœ¨æ‰“å¼€å¯¹åº”è·¯ç”±å¯¹åº”ç»„ä»¶æ—¶å€™ï¼Œæ‰ä¼šåŠ è½½å¯¹åº”çš„jsï¼ˆæ©ï¼Œè¿™å°±æ˜¯æˆ‘æƒ³è¦çš„æ»‘æ¿é‹ï¼‰ã€‚å®ç°æ–¹å¼å…¶å®å¾ˆç®€å•ï¼Œåœ¨è·¯ç”±æ–‡ä»¶ä¸­ç”¨è¿™æ ·çš„æ–¹å¼å®šä¹‰</p> <p><strong>ä¸ºä»€ä¹ˆç”¨è·¯ç”±æ‡’åŠ è½½</strong></p> <p>é™ä½é¡µé¢åˆæ¬¡åŠ è½½æ—¶é—´ï¼Œå‡å°‘æµé‡æ¶ˆè€—ã€‚</p> <p><strong>æ€ä¹ˆç”¨</strong></p> <p>ä¸¤ç§é£æ ¼ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>component: () =&gt; import('@/pages/Index/template.vue')
// const UserIndex = resolve =&gt; require(['@/components/UserIndex'], resolve)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/isaacgaoblog/assets/js/app.01da7489.js" defer></script><script src="/isaacgaoblog/assets/js/23.4ecf9c22.js" defer></script>
  </body>
</html>
