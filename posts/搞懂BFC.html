<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>碎碎念 | 猪脚面线的知识库</title>
    <meta name="description" content="For what it&#39;s worth, it&#39;s never too late.（Updating... XD）">
    <link rel="icon" href="/isaacgaoblog/logo.ico">
    
    <link rel="preload" href="/isaacgaoblog/assets/css/0.styles.60655061.css" as="style"><link rel="preload" href="/isaacgaoblog/assets/js/app.01da7489.js" as="script"><link rel="preload" href="/isaacgaoblog/assets/js/27.0327437d.js" as="script"><link rel="prefetch" href="/isaacgaoblog/assets/js/10.bb6e04e4.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/11.391fd545.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/12.602facc5.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/13.2d9982a6.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/14.83aaa352.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/15.90b7ef7b.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/16.fb97507d.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/17.d2fb61a5.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/18.5f85ae3a.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/19.b706601e.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/2.3704caf5.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/20.66d4ff5f.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/21.341d678b.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/22.3af63f24.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/23.4ecf9c22.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/24.15a6c94a.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/25.bc5a5667.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/26.823bab78.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/28.db82409c.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/29.e695a449.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/3.98b19d1d.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/4.4d6e9538.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/5.44d0334a.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/6.b35e585c.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/7.723d1e3a.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/8.e2bfc8ff.js"><link rel="prefetch" href="/isaacgaoblog/assets/js/9.508f61f1.js">
    <link rel="stylesheet" href="/isaacgaoblog/assets/css/0.styles.60655061.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/isaacgaoblog/" class="home-link router-link-active"><!----> <span class="site-name">猪脚面线的知识库</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/isaacgaoblog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">知识库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/isaacgaoblog/article/frontend/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/isaacgaoblog/article/backend/" class="nav-link">后端</a></li></ul></div></div><div class="nav-item"><a href="/isaacgaoblog/posts/" class="nav-link router-link-active">博文</a></div><div class="nav-item"><a href="https://www.github.com/Cobatkao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/isaacgaoblog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">知识库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/isaacgaoblog/article/frontend/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/isaacgaoblog/article/backend/" class="nav-link">后端</a></li></ul></div></div><div class="nav-item"><a href="/isaacgaoblog/posts/" class="nav-link router-link-active">博文</a></div><div class="nav-item"><a href="https://www.github.com/Cobatkao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>博文</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/isaacgaoblog/posts/" class="sidebar-link">碎碎念</a></li><li><a href="/isaacgaoblog/posts/布局全解.html" class="sidebar-link">布局全解</a></li><li><a href="/isaacgaoblog/posts/重绘与重排.html" class="sidebar-link">重绘与重排</a></li><li><a href="/isaacgaoblog/posts/小白也可以搞懂的闭包.html" class="sidebar-link">小白也可以搞懂的闭包</a></li><li><a href="/isaacgaoblog/posts/小白上手Promise.html" class="sidebar-link">小白上手Promise</a></li><li><a href="/isaacgaoblog/posts/多人博客项目review.html" class="sidebar-link">多人博客项目Review</a></li><li><a href="/isaacgaoblog/posts/前端必须知道的HTTP缓存.html" class="sidebar-link">前端必须知道的HTTP缓存</a></li><li><a href="/isaacgaoblog/posts/从封装两个函数到入门jQuery.html" class="sidebar-link">从封装两个函数到入门jQuery</a></li><li><a href="/isaacgaoblog/posts/webpack4初次上手.html" class="sidebar-link">初次上手webpack4</a></li><li><a href="/isaacgaoblog/posts/Vue.2.x全家桶学习手记.html" class="sidebar-link">使用语雀整理Vue笔记</a></li><li><a href="/isaacgaoblog/posts/HTTPS通信机制.html" class="sidebar-link">HTTPS通信机制</a></li><li><a href="/isaacgaoblog/posts/Event_Loop和任务队列.html" class="sidebar-link">前端必须知道的Event Loop</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="碎碎念"><a href="#碎碎念" aria-hidden="true" class="header-anchor">#</a> 碎碎念</h1> <hr> <p>上一篇讨论<a href="http://blog.leanote.com/post/isaacgao/float-clear" target="_blank" rel="noopener noreferrer">浮动与清除浮动<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的博客中，最后提到了BFC（Block Formatting Contexts）的概念。
<br>
我建议每个学前端的人都要把BFC理解透彻，这样在解决外边距堆叠，高度塌陷及各种定位、布局带来的负面影响时，都能了解原理，选择恰当的解决办法。
<br>
废话不多说了，开始:P
<br></p> <h1 id="官方文档对bfc的解释"><a href="#官方文档对bfc的解释" aria-hidden="true" class="header-anchor">#</a> 官方文档对BFC的解释</h1> <hr> <p>首先，我们来看看<a href="https://www.w3.org/TR/CSS2/visuren.html#block-formatting" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>是如何描述BFC的，我把这段定义拆成三小段，分段描述：</p> <blockquote><p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with 'overflow' other than 'visible' (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.</p></blockquote> <ul><li>浮动，绝对定位，不是块级盒的块级包含块（例如inline-block,table-cells和table-caption），及overflow值不为visible的块级盒子为他们的内容新的块级格式化上下文（BFC）</li></ul> <br>
&gt; In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the 'margin' properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.
<ul><li>在一个块级格式化上下文中，盒子是从包含块顶部开始，一个接一个的垂直排列。</li> <li>两个后代盒子的垂直距离由margin即外边距属性决定。</li> <li>在一个块级格式化上下文中，两个相邻的块级盒子外边距会折叠；</li></ul> <br>
&gt; In a block formatting context, each box's left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a box's line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats).
<ul><li>在一个块级格式化上下文中，每个盒子的外边距和其包含块的左边沿相接触（对于从右向左的格式则相反）；</li> <li>即使在有浮动元素的存在，情况下也是如此(一个盒子的行盒会因为浮动而收缩)，除非这个盒子建立了一个新的BFC（在某些情况下，这个盒子自身会变窄）
<br></li></ul> <h1 id="bfc的理解"><a href="#bfc的理解" aria-hidden="true" class="header-anchor">#</a> BFC的理解</h1> <hr> <ul><li>BFC就是对B（Block）的FC（Formatting Contexts），简单说就是块级元素的排列规则，同样的还有IFC,即对行内元素的排列规则。</li> <li><strong>Formatting Contexts</strong>，是W3C CSS2.1引入的概念，可以理解为页面中的一块渲染区域，并且与外界相隔离，有一套自己的规则，它决定了在这块区域中其子元素ru和定位吗，排列以及和其他元素的关系和相互作用。</li> <li>CSS2.1中增加了BFC和IFC，CSS3中还增加了GFC和FFC。</li> <li><strong>Box</strong>是CSS布局的基本单位，也就是说，一个页面实际上是由很多Box组合而成的。对Box声明不同的display类型，则生成不同类型的Box。不同类型的Box会参与不同的Formatting Contexts（一个决定如何渲染文档额的容器），因此Box内的元素会以不同的方式渲染。</li></ul> <h1 id="bfc的特性"><a href="#bfc的特性" aria-hidden="true" class="header-anchor">#</a> BFC的特性</h1> <hr> <blockquote><p>一个元素，声明了某种规则（后面会讲触发规则），触发了BFC后，便拥有了BFC特性，那什么是BFC特性呢？特性就是前一段所说的,其为拥有一套独立的渲染规则的区域，并且这块区域不受外界的影响，是相对隔离的区域（也有的地方说容器）。区域中的子元素不会在布局上影响外面的元素，反之亦然。同时，BFC仍然属于文档中的普通流。</p></blockquote> <ol><li>内部的box会在垂直方向上一个接一个的排列；</li> <li>Box垂直方向上的距离由外边距决定。当两个相邻的容器在同一个BFC中时，他们的垂直方向会发生外边距叠加，换句话说，只要把两个元素分隔在不同的BFC,便可以消除影响，从而解决外边距合并问题；；</li> <li>每个元素的左外边距与包含块的左边界相接触（从左到右），即使浮动元素也是如此。（这说明BFC中的子元素不会超出它的包含块，而position为absolute的元素可以超出它的包含块边界）；</li> <li>BFC的区域不会与float box所占的区域重叠；</li> <li>计算BFC的高度时，浮动子元素也参与计算；（顺带达到了撑开父容器，清除浮动的目的）</li></ol> <h1 id="如何触发bfc"><a href="#如何触发bfc" aria-hidden="true" class="header-anchor">#</a> 如何触发BFC</h1> <hr> <p>只要父容器上声明以下任一属性即可触发 BFC：
<br></p> <ul><li>float 除了none以外的值</li> <li>overflow除了visible以外的值（hidden，auto，scroll ）</li> <li>display (table-cell，table-caption，inline-block,flex,inline-flex)</li> <li>position（absolute，fixed）</li> <li>fieldset元素（实验性质）</li> <li>根元素</li></ul> <p>以上这些规则，均可以触发BFC，具体的选用要取决于场景，不同的属性会带来不同的作用效果；</p> <h1 id="bfc的应用"><a href="#bfc的应用" aria-hidden="true" class="header-anchor">#</a> BFC的应用</h1> <hr> <ul><li>解决外边距叠加，方法：使父容器添加触发BFC的元素；</li> <li>清除浮动：方法：利用计算BFC高度时，浮动元素也会参与计算的原理，所以为了闭合浮动，我们要对父容器触发BFC；</li> <li>用于布局：利用BFC不会与float box重叠的原理及元素的左/右外边距会触碰到包含块的边沿原理，创建两栏/三栏布局（左右浮动且定宽，中间创建BFC）；</li></ul> <h1 id="父容器使用overfolow-auto-hidden撑开高度的原理"><a href="#父容器使用overfolow-auto-hidden撑开高度的原理" aria-hidden="true" class="header-anchor">#</a> 父容器使用overfolow: auto | hidden撑开高度的原理</h1> <hr> <p>初次看到overflow:hidden可以解决外边距叠加，清除浮动时，我是很困惑其原理的。直到后面，我尝试理解了BFC，知道其会触发BFC特性，生成一个新的渲染区域，有自己的规则，与外界隔离，也就是不受其他BFC影响了。</p> <p>但回过头想，我们看下MDN对overflow属的描述：</p> <blockquote><p>The overflow CSS property is shorthand for the overflow-x and overflow-y properties, and specifies what to do when content is too large to fit in its block formatting context.</p></blockquote> <p>也就是说，overflow属性是用来处理当内容过于长以至于溢出块级容器时，CSS对文本的处理方式；overflow: hidden则是溢出的内容会被裁剪，且不可见。</p> <p>可以这样理解，overflow:hidden是为了触发包含块计算内容高度，不计算高度overflow怎么裁剪多余部分并隐藏呢？</p> <p>那怎么计算高度呢？声明了overflow:hidden后需要根据内容的高度来裁剪，浮动元素脱离了文档流，如果未申明高度或高度为auto，那么overflow的高度计算就无从算起，所以要将浮动元素的高度也计算在内，overflow才会起作用，由此，<strong>顺带</strong>达成了<strong>清除浮动</strong>的目标；</p> <h1 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h1> <p>很多人第一次接触BFC时经常有一个疑问，BFC概念太多了，资料越多往往更难理解。其实，对于BFC我们只需要知道使用一定的CSS声明可以触发BFC，浏览器对生成的BFC有一系列的渲染规则，利用这些渲染规则我们可以达到一定的布局效果，为了达到特定的布局效果我们让元素生成BFC。</p> <p>我们要记住BFC是页面元素里一个独立存在作用块，它不影响它外面的布局，外面的元素也不会影响到BFC里面的布局，有时候对于页面一些异常效果我们往BFC的思路想想可能会得到解决。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/isaacgaoblog/assets/js/app.01da7489.js" defer></script><script src="/isaacgaoblog/assets/js/27.0327437d.js" defer></script>
  </body>
</html>
